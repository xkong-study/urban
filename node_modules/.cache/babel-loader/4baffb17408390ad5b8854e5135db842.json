{"ast":null,"code":"import _slicedToArray from \"/Users/kong/Desktop/urban_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kong/Desktop/urban_react/src/pages/Lists.jsx\";\n\n/* jshint esversion: 6 */\nimport React from 'react';\nimport { List, Button, Skeleton } from 'antd';\nimport { useEffect, useState } from 'react';\nimport { ArticleListApi, DeleteTextApi } from \"./request/api\";\nimport { useNavigate } from 'react-router-dom';\n\nfunction MyTitle(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"table_title\",\n    href: \"https://jsonplaceholder.typicode.com/posts/\" + props.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 13\n    }\n  }, props.title), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: '#999'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 13\n    }\n  }, \"\\u7B80\\u4ECB:\", props.subTitle));\n}\n\nvar dbName = 'helloIndexDB',\n    version = 1,\n    storeName = 'helloStore';\nvar indexedDB = window.indexedDB;\nvar db;\nvar request = indexedDB.open(dbName, version);\n\nrequest.onsuccess = function (event) {\n  db = event.target.result; // 数据库对象\n\n  console.log('数据库打开成功');\n};\n\nrequest.onerror = function (event) {\n  console.log('数据库打开报错');\n};\n\nrequest.onupgradeneeded = function (event) {\n  // 数据库创建或升级的时候会触发\n  console.log('onupgradeneeded');\n  db = event.target.result; // 数据库对象\n\n  var objectStore;\n\n  if (!db.objectStoreNames.contains(storeName)) {\n    objectStore = db.createObjectStore(storeName, {\n      keyPath: 'id'\n    }); // 创建表\n    // objectStore.createIndex('name', 'name', { unique: true }) // 创建索引 可以让你搜索任意字段\n  }\n};\n\nexport default function Lists() {\n  var _this = this;\n\n  var w;\n\n  function startWorker() {\n    if (typeof w == \"undefined\") {\n      w = new Worker(\"work.js\");\n    }\n\n    w.onmessage = function (event) {\n      document.getElementById(\"result\").innerHTML = event.data;\n    };\n  }\n\n  function stopWorker() {\n    w.terminate();\n    w = undefined;\n  }\n\n  var map;\n\n  function initMap() {\n    map = new google.maps.Map(document.getElementById(\"map\"), {\n      center: {\n        lat: -34.397,\n        lng: 150.644\n      },\n      zoom: 8\n    });\n  }\n\n  var navigate = useNavigate();\n\n  var _useState = useState([{\n    title: '',\n    id: '',\n    text: ''\n  }]),\n      _useState2 = _slicedToArray(_useState, 2),\n      arr = _useState2[0],\n      setArr = _useState2[1];\n\n  function Delete(item) {\n    var params = {\n      id: item.id\n    };\n    console.log(params);\n    DeleteTextApi({\n      params: params\n    }).then(function (response) {\n      console.log(response);\n      window.location.reload();\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  useEffect(function () {\n    ArticleListApi().then(function (res) {\n      var newArr = JSON.parse(JSON.stringify(res)); //深拷贝\n\n      var myarr = []; //用来获取自己想要的属性\n\n      newArr.map(function (item) {\n        var obj = {\n          id: item.id,\n          title: /*#__PURE__*/React.createElement(MyTitle, {\n            title: item.title,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }\n          }),\n          text: item.text\n        };\n        myarr.push(obj);\n      });\n      setArr(myarr);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list_table\",\n    style: {\n      paddingLeft: '50px',\n      height: '580px',\n      marginLeft: '40px',\n      width: '1100px',\n      paddingRight: '50px',\n      marginTop: '4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"script\", {\n    async: true,\n    src: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyA5j3mO3-bW5NnY9HtzN2nL4bynBbLUziY&callback=initMap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"map\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, \"window.initMap = initMap\"), /*#__PURE__*/React.createElement(List, {\n    itemLayout: \"horizontal\",\n    dataSource: arr,\n    renderItem: function renderItem(item) {\n      return /*#__PURE__*/React.createElement(List.Item, {\n        actions: [/*#__PURE__*/React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            return navigate('/edit?id=' + item.id);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }\n        }, \"\\u7F16\\u8F91\"), /*#__PURE__*/React.createElement(Button, {\n          type: \"danger\",\n          onClick: Delete.bind(_this, item),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }\n        }, \"\\u5220\\u9664\")],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        loading: false,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(List.Item.Meta, {\n        title: /*#__PURE__*/React.createElement(\"a\", {\n          href: \"!#\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 36\n          }\n        }, item.title),\n        description: item.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }\n      })));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/kong/Desktop/urban_react/src/pages/Lists.jsx"],"names":["React","List","Button","Skeleton","useEffect","useState","ArticleListApi","DeleteTextApi","useNavigate","MyTitle","props","id","title","color","subTitle","dbName","version","storeName","indexedDB","window","db","request","open","onsuccess","event","target","result","console","log","onerror","onupgradeneeded","objectStore","objectStoreNames","contains","createObjectStore","keyPath","Lists","w","startWorker","Worker","onmessage","document","getElementById","innerHTML","data","stopWorker","terminate","undefined","map","initMap","google","maps","Map","center","lat","lng","zoom","navigate","text","arr","setArr","Delete","item","params","then","response","location","reload","catch","error","res","newArr","JSON","parse","stringify","myarr","obj","push","paddingLeft","height","marginLeft","width","paddingRight","marginTop","bind"],"mappings":"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","sourcesContent":["/* jshint esversion: 6 */\nimport React from 'react'\nimport {List, Button, Skeleton} from 'antd';\nimport {useEffect, useState} from 'react'\nimport {ArticleListApi, DeleteTextApi} from \"./request/api\";\nimport {useNavigate} from 'react-router-dom'\nfunction MyTitle(props) {\n    return (\n        <div>\n            <a className='table_title' href={\"https://jsonplaceholder.typicode.com/posts/\"+props.id} >{props.title}</a>\n            <p style={{ color: '#999' }}>简介:{props.subTitle}</p>\n        </div>\n    )\n}\n\nlet dbName = 'helloIndexDB', version = 1, storeName = 'helloStore'\n\nlet indexedDB = window.indexedDB\nlet db\nconst request = indexedDB.open(dbName, version)\nrequest.onsuccess = function(event) {\n    db = event.target.result // 数据库对象\n    console.log('数据库打开成功')\n}\n\nrequest.onerror = function(event) {\n    console.log('数据库打开报错')\n}\n\nrequest.onupgradeneeded = function(event) {\n    // 数据库创建或升级的时候会触发\n    console.log('onupgradeneeded')\n    db = event.target.result // 数据库对象\n    let objectStore\n    if (!db.objectStoreNames.contains(storeName)) {\n        objectStore = db.createObjectStore(storeName, { keyPath: 'id' }) // 创建表\n        // objectStore.createIndex('name', 'name', { unique: true }) // 创建索引 可以让你搜索任意字段\n    }\n}\n\n\nexport default function Lists(){\n    let w;\n    function startWorker() {\n        if (typeof(w) == \"undefined\") {\n            w = new Worker(\"work.js\");\n        }\n        w.onmessage = function(event) {\n            document.getElementById(\"result\").innerHTML = event.data;\n        };\n    }\n\n    function stopWorker() {\n        w.terminate();\n        w = undefined;\n    }\n\n    let map;\n\n    function initMap() {\n        map = new google.maps.Map(document.getElementById(\"map\"), {\n            center: { lat: -34.397, lng: 150.644 },\n            zoom: 8,\n        });\n    }\n\n    const navigate = useNavigate()\n    const [arr,setArr]=useState([\n        {\n            title:'',\n            id:'',\n            text:''\n        }\n    ])\n    function Delete(item) {\n        let params={\n            id:item.id\n        }\n        console.log(params)\n        DeleteTextApi({params}).then(function (response) {\n            console.log(response);\n            window.location.reload()\n        })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n    useEffect(()=>{\n        ArticleListApi().then(res=> {\n            let newArr=JSON.parse(JSON.stringify(res));//深拷贝\n            let myarr=[]//用来获取自己想要的属性\n            newArr.map(item=>{\n                let obj= {\n                    id : item.id,\n                    title : <MyTitle title={item.title}  />,\n                    text:item.text,\n                }\n                myarr.push(obj);\n            })\n            setArr(myarr)\n        })\n    },[])\n\n    return(\n        <div className='list_table' style={{ paddingLeft: '50px',height:'580px',marginLeft:'40px',width:'1100px',paddingRight:'50px',marginTop:'4px'}}>\n            <script async src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyA5j3mO3-bW5NnY9HtzN2nL4bynBbLUziY&callback=initMap\"></script>\n            <div id=\"map\">window.initMap = initMap</div>\n        <List\n            itemLayout=\"horizontal\"\n            dataSource={arr}\n            renderItem={item => (\n                <List.Item\n                    actions={[\n                        <Button type='primary' onClick={()=>navigate('/edit?id='+item.id)}>编辑</Button>,\n                        <Button type='danger' onClick={Delete.bind(this,item)}>删除</Button>,\n                    ]}\n                >\n                    {/*<button onClick={startWorker()}>Start Worker</button>*/}\n                    {/*<button onClick={stopWorker()}>Stop Worker</button>*/}\n\n                    <Skeleton loading={false}>\n                        <List.Item.Meta\n                            title={<a href=\"!#\">{item.title}</a>}\n                            description={item.text}\n                        />\n                    </Skeleton>\n                </List.Item>\n            )}\n          />\n        </div>\n    )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _possibleConstructorReturn from \"/Users/kong/Desktop/urban_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kong/Desktop/urban_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kong/Desktop/urban_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _classCallCheck from \"/Users/kong/Desktop/urban_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kong/Desktop/urban_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport firebase from '@firebase/app-compat';\nimport { Provider, ComponentContainer, Component } from '@firebase/component';\nimport { _validatePathString, onChildMoved, onChildChanged, onChildRemoved, onChildAdded, onValue, off as _off, get as _get, query, limitToFirst as _limitToFirst, limitToLast as _limitToLast, orderByChild as _orderByChild, orderByKey as _orderByKey, orderByPriority as _orderByPriority, orderByValue as _orderByValue, startAt as _startAt, startAfter as _startAfter, endAt as _endAt, endBefore as _endBefore, equalTo as _equalTo, _ReferenceImpl, _QueryImpl, _QueryParams, child as _child, set as _set, _validateWritablePath, update as _update, setWithPriority as _setWithPriority, remove as _remove, runTransaction, setPriority as _setPriority, push as _push, OnDisconnect as OnDisconnect$1, forceWebSockets, forceLongPolling, connectDatabaseEmulator, refFromURL as _refFromURL, ref as _ref, goOffline as _goOffline, goOnline as _goOnline, serverTimestamp, increment as _increment, _setSDKVersion, _repoManagerDatabaseFromApp, enableLogging } from '@firebase/database';\nimport { errorPrefix, validateArgCount, validateCallback, validateContextObject, Deferred } from '@firebase/util';\nimport { Logger } from '@firebase/logger';\nvar name = \"@firebase/database-compat\";\nvar version = \"0.2.10\";\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar logClient = new Logger('@firebase/database-compat');\n\nvar warn = function warn(msg) {\n  var message = 'FIREBASE WARNING: ' + msg;\n  logClient.warn(message);\n};\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar validateBoolean = function validateBoolean(fnName, argumentName, bool, optional) {\n  if (optional && bool === undefined) {\n    return;\n  }\n\n  if (typeof bool !== 'boolean') {\n    throw new Error(errorPrefix(fnName, argumentName) + 'must be a boolean.');\n  }\n};\n\nvar validateEventType = function validateEventType(fnName, eventType, optional) {\n  if (optional && eventType === undefined) {\n    return;\n  }\n\n  switch (eventType) {\n    case 'value':\n    case 'child_added':\n    case 'child_removed':\n    case 'child_changed':\n    case 'child_moved':\n      break;\n\n    default:\n      throw new Error(errorPrefix(fnName, 'eventType') + 'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' + '\"child_changed\", or \"child_moved\".');\n  }\n};\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar OnDisconnect = /*#__PURE__*/function () {\n  function OnDisconnect(_delegate) {\n    _classCallCheck(this, OnDisconnect);\n\n    this._delegate = _delegate;\n  }\n\n  _createClass(OnDisconnect, [{\n    key: \"cancel\",\n    value: function cancel(onComplete) {\n      validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\n      validateCallback('OnDisconnect.cancel', 'onComplete', onComplete, true);\n\n      var result = this._delegate.cancel();\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(onComplete) {\n      validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\n      validateCallback('OnDisconnect.remove', 'onComplete', onComplete, true);\n\n      var result = this._delegate.remove();\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"set\",\n    value: function set(value, onComplete) {\n      validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\n      validateCallback('OnDisconnect.set', 'onComplete', onComplete, true);\n\n      var result = this._delegate.set(value);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setWithPriority\",\n    value: function setWithPriority(value, priority, onComplete) {\n      validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\n      validateCallback('OnDisconnect.setWithPriority', 'onComplete', onComplete, true);\n\n      var result = this._delegate.setWithPriority(value, priority);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"update\",\n    value: function update(objectToMerge, onComplete) {\n      validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\n\n      if (Array.isArray(objectToMerge)) {\n        var newObjectToMerge = {};\n\n        for (var i = 0; i < objectToMerge.length; ++i) {\n          newObjectToMerge['' + i] = objectToMerge[i];\n        }\n\n        objectToMerge = newObjectToMerge;\n        warn('Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' + 'existing data, or an Object with integer keys if you really do want to only update some of the children.');\n      }\n\n      validateCallback('OnDisconnect.update', 'onComplete', onComplete, true);\n\n      var result = this._delegate.update(objectToMerge);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }]);\n\n  return OnDisconnect;\n}();\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar TransactionResult = /*#__PURE__*/function () {\n  /**\r\n   * A type for the resolve value of Firebase.transaction.\r\n   */\n  function TransactionResult(committed, snapshot) {\n    _classCallCheck(this, TransactionResult);\n\n    this.committed = committed;\n    this.snapshot = snapshot;\n  } // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n\n\n  _createClass(TransactionResult, [{\n    key: \"toJSON\",\n    value: function toJSON() {\n      validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\n      return {\n        committed: this.committed,\n        snapshot: this.snapshot.toJSON()\n      };\n    }\n  }]);\n\n  return TransactionResult;\n}();\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\r\n * surfaces the public methods (val, forEach, etc.) we want to expose.\r\n */\n\n\nvar DataSnapshot = /*#__PURE__*/function () {\n  function DataSnapshot(_database, _delegate) {\n    _classCallCheck(this, DataSnapshot);\n\n    this._database = _database;\n    this._delegate = _delegate;\n  }\n  /**\r\n   * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\r\n   * empty.\r\n   *\r\n   * @returns JSON representation of the DataSnapshot contents, or null if empty.\r\n   */\n\n\n  _createClass(DataSnapshot, [{\n    key: \"val\",\n    value: function val() {\n      validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\n      return this._delegate.val();\n    }\n    /**\r\n     * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\r\n     * the entire node contents.\r\n     * @returns JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\n\n  }, {\n    key: \"exportVal\",\n    value: function exportVal() {\n      validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\n      return this._delegate.exportVal();\n    } // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n    // for end-users\n\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\n      validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\n      return this._delegate.toJSON();\n    }\n    /**\r\n     * Returns whether the snapshot contains a non-null value.\r\n     *\r\n     * @returns Whether the snapshot contains a non-null value, or is empty.\r\n     */\n\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\n      return this._delegate.exists();\n    }\n    /**\r\n     * Returns a DataSnapshot of the specified child node's contents.\r\n     *\r\n     * @param path - Path to a child.\r\n     * @returns DataSnapshot for child node.\r\n     */\n\n  }, {\n    key: \"child\",\n    value: function child(path) {\n      validateArgCount('DataSnapshot.child', 0, 1, arguments.length); // Ensure the childPath is a string (can be a number)\n\n      path = String(path);\n\n      _validatePathString('DataSnapshot.child', 'path', path, false);\n\n      return new DataSnapshot(this._database, this._delegate.child(path));\n    }\n    /**\r\n     * Returns whether the snapshot contains a child at the specified path.\r\n     *\r\n     * @param path - Path to a child.\r\n     * @returns Whether the child exists.\r\n     */\n\n  }, {\n    key: \"hasChild\",\n    value: function hasChild(path) {\n      validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\n\n      _validatePathString('DataSnapshot.hasChild', 'path', path, false);\n\n      return this._delegate.hasChild(path);\n    }\n    /**\r\n     * Returns the priority of the object, or null if no priority was set.\r\n     *\r\n     * @returns The priority.\r\n     */\n\n  }, {\n    key: \"getPriority\",\n    value: function getPriority() {\n      validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\n      return this._delegate.priority;\n    }\n    /**\r\n     * Iterates through child nodes and calls the specified action for each one.\r\n     *\r\n     * @param action - Callback function to be called\r\n     * for each child.\r\n     * @returns True if forEach was canceled by action returning true for\r\n     * one of the child nodes.\r\n     */\n\n  }, {\n    key: \"forEach\",\n    value: function forEach(action) {\n      var _this = this;\n\n      validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\n      validateCallback('DataSnapshot.forEach', 'action', action, false);\n      return this._delegate.forEach(function (expDataSnapshot) {\n        return action(new DataSnapshot(_this._database, expDataSnapshot));\n      });\n    }\n    /**\r\n     * Returns whether this DataSnapshot has children.\r\n     * @returns True if the DataSnapshot contains 1 or more child nodes.\r\n     */\n\n  }, {\n    key: \"hasChildren\",\n    value: function hasChildren() {\n      validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\n      return this._delegate.hasChildren();\n    }\n  }, {\n    key: \"numChildren\",\n\n    /**\r\n     * Returns the number of children for this DataSnapshot.\r\n     * @returns The number of children that this DataSnapshot contains.\r\n     */\n    value: function numChildren() {\n      validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\n      return this._delegate.size;\n    }\n    /**\r\n     * @returns The Firebase reference for the location this snapshot's data came\r\n     * from.\r\n     */\n\n  }, {\n    key: \"getRef\",\n    value: function getRef() {\n      validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\n      return new Reference(this._database, this._delegate.ref);\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return this._delegate.key;\n    }\n  }, {\n    key: \"ref\",\n    get: function get() {\n      return this.getRef();\n    }\n  }]);\n\n  return DataSnapshot;\n}();\n/**\r\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\r\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\r\n *\r\n * Since every Firebase reference is a query, Firebase inherits from this object.\r\n */\n\n\nvar Query = /*#__PURE__*/function () {\n  function Query(database, _delegate) {\n    _classCallCheck(this, Query);\n\n    this.database = database;\n    this._delegate = _delegate;\n  }\n\n  _createClass(Query, [{\n    key: \"on\",\n    value: function on(eventType, callback, cancelCallbackOrContext, context) {\n      var _this2 = this;\n\n      var _a;\n\n      validateArgCount('Query.on', 2, 4, arguments.length);\n      validateCallback('Query.on', 'callback', callback, false);\n      var ret = Query.getCancelAndContextArgs_('Query.on', cancelCallbackOrContext, context);\n\n      var valueCallback = function valueCallback(expSnapshot, previousChildName) {\n        callback.call(ret.context, new DataSnapshot(_this2.database, expSnapshot), previousChildName);\n      };\n\n      valueCallback.userCallback = callback;\n      valueCallback.context = ret.context;\n      var cancelCallback = (_a = ret.cancel) === null || _a === void 0 ? void 0 : _a.bind(ret.context);\n\n      switch (eventType) {\n        case 'value':\n          onValue(this._delegate, valueCallback, cancelCallback);\n          return callback;\n\n        case 'child_added':\n          onChildAdded(this._delegate, valueCallback, cancelCallback);\n          return callback;\n\n        case 'child_removed':\n          onChildRemoved(this._delegate, valueCallback, cancelCallback);\n          return callback;\n\n        case 'child_changed':\n          onChildChanged(this._delegate, valueCallback, cancelCallback);\n          return callback;\n\n        case 'child_moved':\n          onChildMoved(this._delegate, valueCallback, cancelCallback);\n          return callback;\n\n        default:\n          throw new Error(errorPrefix('Query.on', 'eventType') + 'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' + '\"child_changed\", or \"child_moved\".');\n      }\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventType, callback, context) {\n      validateArgCount('Query.off', 0, 3, arguments.length);\n      validateEventType('Query.off', eventType, true);\n      validateCallback('Query.off', 'callback', callback, true);\n      validateContextObject('Query.off', 'context', context, true);\n\n      if (callback) {\n        var valueCallback = function valueCallback() {};\n\n        valueCallback.userCallback = callback;\n        valueCallback.context = context;\n\n        _off(this._delegate, eventType, valueCallback);\n      } else {\n        _off(this._delegate, eventType);\n      }\n    }\n    /**\r\n     * Get the server-value for this query, or return a cached value if not connected.\r\n     */\n\n  }, {\n    key: \"get\",\n    value: function get() {\n      var _this3 = this;\n\n      return _get(this._delegate).then(function (expSnapshot) {\n        return new DataSnapshot(_this3.database, expSnapshot);\n      });\n    }\n    /**\r\n     * Attaches a listener, waits for the first event, and then removes the listener\r\n     */\n\n  }, {\n    key: \"once\",\n    value: function once(eventType, callback, failureCallbackOrContext, context) {\n      var _this4 = this;\n\n      validateArgCount('Query.once', 1, 4, arguments.length);\n      validateCallback('Query.once', 'callback', callback, true);\n      var ret = Query.getCancelAndContextArgs_('Query.once', failureCallbackOrContext, context);\n      var deferred = new Deferred();\n\n      var valueCallback = function valueCallback(expSnapshot, previousChildName) {\n        var result = new DataSnapshot(_this4.database, expSnapshot);\n\n        if (callback) {\n          callback.call(ret.context, result, previousChildName);\n        }\n\n        deferred.resolve(result);\n      };\n\n      valueCallback.userCallback = callback;\n      valueCallback.context = ret.context;\n\n      var cancelCallback = function cancelCallback(error) {\n        if (ret.cancel) {\n          ret.cancel.call(ret.context, error);\n        }\n\n        deferred.reject(error);\n      };\n\n      switch (eventType) {\n        case 'value':\n          onValue(this._delegate, valueCallback, cancelCallback, {\n            onlyOnce: true\n          });\n          break;\n\n        case 'child_added':\n          onChildAdded(this._delegate, valueCallback, cancelCallback, {\n            onlyOnce: true\n          });\n          break;\n\n        case 'child_removed':\n          onChildRemoved(this._delegate, valueCallback, cancelCallback, {\n            onlyOnce: true\n          });\n          break;\n\n        case 'child_changed':\n          onChildChanged(this._delegate, valueCallback, cancelCallback, {\n            onlyOnce: true\n          });\n          break;\n\n        case 'child_moved':\n          onChildMoved(this._delegate, valueCallback, cancelCallback, {\n            onlyOnce: true\n          });\n          break;\n\n        default:\n          throw new Error(errorPrefix('Query.once', 'eventType') + 'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' + '\"child_changed\", or \"child_moved\".');\n      }\n\n      return deferred.promise;\n    }\n    /**\r\n     * Set a limit and anchor it to the start of the window.\r\n     */\n\n  }, {\n    key: \"limitToFirst\",\n    value: function limitToFirst(limit) {\n      validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\n      return new Query(this.database, query(this._delegate, _limitToFirst(limit)));\n    }\n    /**\r\n     * Set a limit and anchor it to the end of the window.\r\n     */\n\n  }, {\n    key: \"limitToLast\",\n    value: function limitToLast(limit) {\n      validateArgCount('Query.limitToLast', 1, 1, arguments.length);\n      return new Query(this.database, query(this._delegate, _limitToLast(limit)));\n    }\n    /**\r\n     * Given a child path, return a new query ordered by the specified grandchild path.\r\n     */\n\n  }, {\n    key: \"orderByChild\",\n    value: function orderByChild(path) {\n      validateArgCount('Query.orderByChild', 1, 1, arguments.length);\n      return new Query(this.database, query(this._delegate, _orderByChild(path)));\n    }\n    /**\r\n     * Return a new query ordered by the KeyIndex\r\n     */\n\n  }, {\n    key: \"orderByKey\",\n    value: function orderByKey() {\n      validateArgCount('Query.orderByKey', 0, 0, arguments.length);\n      return new Query(this.database, query(this._delegate, _orderByKey()));\n    }\n    /**\r\n     * Return a new query ordered by the PriorityIndex\r\n     */\n\n  }, {\n    key: \"orderByPriority\",\n    value: function orderByPriority() {\n      validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\n      return new Query(this.database, query(this._delegate, _orderByPriority()));\n    }\n    /**\r\n     * Return a new query ordered by the ValueIndex\r\n     */\n\n  }, {\n    key: \"orderByValue\",\n    value: function orderByValue() {\n      validateArgCount('Query.orderByValue', 0, 0, arguments.length);\n      return new Query(this.database, query(this._delegate, _orderByValue()));\n    }\n  }, {\n    key: \"startAt\",\n    value: function startAt() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var name = arguments.length > 1 ? arguments[1] : undefined;\n      validateArgCount('Query.startAt', 0, 2, arguments.length);\n      return new Query(this.database, query(this._delegate, _startAt(value, name)));\n    }\n  }, {\n    key: \"startAfter\",\n    value: function startAfter() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var name = arguments.length > 1 ? arguments[1] : undefined;\n      validateArgCount('Query.startAfter', 0, 2, arguments.length);\n      return new Query(this.database, query(this._delegate, _startAfter(value, name)));\n    }\n  }, {\n    key: \"endAt\",\n    value: function endAt() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var name = arguments.length > 1 ? arguments[1] : undefined;\n      validateArgCount('Query.endAt', 0, 2, arguments.length);\n      return new Query(this.database, query(this._delegate, _endAt(value, name)));\n    }\n  }, {\n    key: \"endBefore\",\n    value: function endBefore() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var name = arguments.length > 1 ? arguments[1] : undefined;\n      validateArgCount('Query.endBefore', 0, 2, arguments.length);\n      return new Query(this.database, query(this._delegate, _endBefore(value, name)));\n    }\n    /**\r\n     * Load the selection of children with exactly the specified value, and, optionally,\r\n     * the specified name.\r\n     */\n\n  }, {\n    key: \"equalTo\",\n    value: function equalTo(value, name) {\n      validateArgCount('Query.equalTo', 1, 2, arguments.length);\n      return new Query(this.database, query(this._delegate, _equalTo(value, name)));\n    }\n    /**\r\n     * @returns URL for this location.\r\n     */\n\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      validateArgCount('Query.toString', 0, 0, arguments.length);\n      return this._delegate.toString();\n    } // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n    // for end-users.\n\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      // An optional spacer argument is unnecessary for a string.\n      validateArgCount('Query.toJSON', 0, 1, arguments.length);\n      return this._delegate.toJSON();\n    }\n    /**\r\n     * Return true if this query and the provided query are equivalent; otherwise, return false.\r\n     */\n\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      validateArgCount('Query.isEqual', 1, 1, arguments.length);\n\n      if (!(other instanceof Query)) {\n        var error = 'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\n        throw new Error(error);\n      }\n\n      return this._delegate.isEqual(other._delegate);\n    }\n    /**\r\n     * Helper used by .on and .once to extract the context and or cancel arguments.\r\n     * @param fnName - The function name (on or once)\r\n     *\r\n     */\n\n  }, {\n    key: \"ref\",\n    get: function get() {\n      return new Reference(this.database, new _ReferenceImpl(this._delegate._repo, this._delegate._path));\n    }\n  }], [{\n    key: \"getCancelAndContextArgs_\",\n    value: function getCancelAndContextArgs_(fnName, cancelOrContext, context) {\n      var ret = {\n        cancel: undefined,\n        context: undefined\n      };\n\n      if (cancelOrContext && context) {\n        ret.cancel = cancelOrContext;\n        validateCallback(fnName, 'cancel', ret.cancel, true);\n        ret.context = context;\n        validateContextObject(fnName, 'context', ret.context, true);\n      } else if (cancelOrContext) {\n        // we have either a cancel callback or a context.\n        if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\n          // it's a context!\n          ret.context = cancelOrContext;\n        } else if (typeof cancelOrContext === 'function') {\n          ret.cancel = cancelOrContext;\n        } else {\n          throw new Error(errorPrefix(fnName, 'cancelOrContext') + ' must either be a cancel callback or a context object.');\n        }\n      }\n\n      return ret;\n    }\n  }]);\n\n  return Query;\n}();\n\nvar Reference = /*#__PURE__*/function (_Query) {\n  _inherits(Reference, _Query);\n\n  /**\r\n   * Call options:\r\n   *   new Reference(Repo, Path) or\r\n   *   new Reference(url: string, string|RepoManager)\r\n   *\r\n   * Externally - this is the firebase.database.Reference type.\r\n   */\n  function Reference(database, _delegate) {\n    var _this5;\n\n    _classCallCheck(this, Reference);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(Reference).call(this, database, new _QueryImpl(_delegate._repo, _delegate._path, new _QueryParams(), false)));\n    _this5.database = database;\n    _this5._delegate = _delegate;\n    return _this5;\n  }\n  /** @returns {?string} */\n\n\n  _createClass(Reference, [{\n    key: \"getKey\",\n    value: function getKey() {\n      validateArgCount('Reference.key', 0, 0, arguments.length);\n      return this._delegate.key;\n    }\n  }, {\n    key: \"child\",\n    value: function child(pathString) {\n      validateArgCount('Reference.child', 1, 1, arguments.length);\n\n      if (typeof pathString === 'number') {\n        pathString = String(pathString);\n      }\n\n      return new Reference(this.database, _child(this._delegate, pathString));\n    }\n    /** @returns {?Reference} */\n\n  }, {\n    key: \"getParent\",\n    value: function getParent() {\n      validateArgCount('Reference.parent', 0, 0, arguments.length);\n      var parent = this._delegate.parent;\n      return parent ? new Reference(this.database, parent) : null;\n    }\n    /** @returns {!Reference} */\n\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      validateArgCount('Reference.root', 0, 0, arguments.length);\n      return new Reference(this.database, this._delegate.root);\n    }\n  }, {\n    key: \"set\",\n    value: function set(newVal, onComplete) {\n      validateArgCount('Reference.set', 1, 2, arguments.length);\n      validateCallback('Reference.set', 'onComplete', onComplete, true);\n\n      var result = _set(this._delegate, newVal);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"update\",\n    value: function update(values, onComplete) {\n      validateArgCount('Reference.update', 1, 2, arguments.length);\n\n      if (Array.isArray(values)) {\n        var newObjectToMerge = {};\n\n        for (var i = 0; i < values.length; ++i) {\n          newObjectToMerge['' + i] = values[i];\n        }\n\n        values = newObjectToMerge;\n        warn('Passing an Array to Firebase.update() is deprecated. ' + 'Use set() if you want to overwrite the existing data, or ' + 'an Object with integer keys if you really do want to ' + 'only update some of the children.');\n      }\n\n      _validateWritablePath('Reference.update', this._delegate._path);\n\n      validateCallback('Reference.update', 'onComplete', onComplete, true);\n\n      var result = _update(this._delegate, values);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setWithPriority\",\n    value: function setWithPriority(newVal, newPriority, onComplete) {\n      validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\n      validateCallback('Reference.setWithPriority', 'onComplete', onComplete, true);\n\n      var result = _setWithPriority(this._delegate, newVal, newPriority);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(onComplete) {\n      validateArgCount('Reference.remove', 0, 1, arguments.length);\n      validateCallback('Reference.remove', 'onComplete', onComplete, true);\n\n      var result = _remove(this._delegate);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"transaction\",\n    value: function transaction(transactionUpdate, onComplete, applyLocally) {\n      var _this6 = this;\n\n      validateArgCount('Reference.transaction', 1, 3, arguments.length);\n      validateCallback('Reference.transaction', 'transactionUpdate', transactionUpdate, false);\n      validateCallback('Reference.transaction', 'onComplete', onComplete, true);\n      validateBoolean('Reference.transaction', 'applyLocally', applyLocally, true);\n      var result = runTransaction(this._delegate, transactionUpdate, {\n        applyLocally: applyLocally\n      }).then(function (transactionResult) {\n        return new TransactionResult(transactionResult.committed, new DataSnapshot(_this6.database, transactionResult.snapshot));\n      });\n\n      if (onComplete) {\n        result.then(function (transactionResult) {\n          return onComplete(null, transactionResult.committed, transactionResult.snapshot);\n        }, function (error) {\n          return onComplete(error, false, null);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setPriority\",\n    value: function setPriority(priority, onComplete) {\n      validateArgCount('Reference.setPriority', 1, 2, arguments.length);\n      validateCallback('Reference.setPriority', 'onComplete', onComplete, true);\n\n      var result = _setPriority(this._delegate, priority);\n\n      if (onComplete) {\n        result.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"push\",\n    value: function push(value, onComplete) {\n      var _this7 = this;\n\n      validateArgCount('Reference.push', 0, 2, arguments.length);\n      validateCallback('Reference.push', 'onComplete', onComplete, true);\n\n      var expPromise = _push(this._delegate, value);\n\n      var promise = expPromise.then(function (expRef) {\n        return new Reference(_this7.database, expRef);\n      });\n\n      if (onComplete) {\n        promise.then(function () {\n          return onComplete(null);\n        }, function (error) {\n          return onComplete(error);\n        });\n      }\n\n      var result = new Reference(this.database, expPromise);\n      result.then = promise.then.bind(promise);\n      result.catch = promise.catch.bind(promise, undefined);\n      return result;\n    }\n  }, {\n    key: \"onDisconnect\",\n    value: function onDisconnect() {\n      _validateWritablePath('Reference.onDisconnect', this._delegate._path);\n\n      return new OnDisconnect(new OnDisconnect$1(this._delegate._repo, this._delegate._path));\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return this.getKey();\n    }\n  }, {\n    key: \"parent\",\n    get: function get() {\n      return this.getParent();\n    }\n  }, {\n    key: \"root\",\n    get: function get() {\n      return this.getRoot();\n    }\n  }]);\n\n  return Reference;\n}(Query);\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Class representing a firebase database.\r\n */\n\n\nvar Database = /*#__PURE__*/function () {\n  /**\r\n   * The constructor should not be called by users of our public API.\r\n   */\n  function Database(_delegate, app) {\n    var _this8 = this;\n\n    _classCallCheck(this, Database);\n\n    this._delegate = _delegate;\n    this.app = app;\n    this.INTERNAL = {\n      delete: function _delete() {\n        return _this8._delegate._delete();\n      },\n      forceWebSockets: forceWebSockets,\n      forceLongPolling: forceLongPolling\n    };\n  }\n  /**\r\n   * Modify this instance to communicate with the Realtime Database emulator.\r\n   *\r\n   * <p>Note: This method must be called before performing any other operation.\r\n   *\r\n   * @param host - the emulator host (ex: localhost)\r\n   * @param port - the emulator port (ex: 8080)\r\n   * @param options.mockUserToken - the mock auth token to use for unit testing Security Rules\r\n   */\n\n\n  _createClass(Database, [{\n    key: \"useEmulator\",\n    value: function useEmulator(host, port) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      connectDatabaseEmulator(this._delegate, host, port, options);\n    }\n  }, {\n    key: \"ref\",\n    value: function ref(path) {\n      validateArgCount('database.ref', 0, 1, arguments.length);\n\n      if (path instanceof Reference) {\n        var childRef = _refFromURL(this._delegate, path.toString());\n\n        return new Reference(this, childRef);\n      } else {\n        var _childRef = _ref(this._delegate, path);\n\n        return new Reference(this, _childRef);\n      }\n    }\n    /**\r\n     * Returns a reference to the root or the path specified in url.\r\n     * We throw a exception if the url is not in the same domain as the\r\n     * current repo.\r\n     * @returns Firebase reference.\r\n     */\n\n  }, {\n    key: \"refFromURL\",\n    value: function refFromURL(url) {\n      var apiName = 'database.refFromURL';\n      validateArgCount(apiName, 1, 1, arguments.length);\n\n      var childRef = _refFromURL(this._delegate, url);\n\n      return new Reference(this, childRef);\n    } // Make individual repo go offline.\n\n  }, {\n    key: \"goOffline\",\n    value: function goOffline() {\n      validateArgCount('database.goOffline', 0, 0, arguments.length);\n      return _goOffline(this._delegate);\n    }\n  }, {\n    key: \"goOnline\",\n    value: function goOnline() {\n      validateArgCount('database.goOnline', 0, 0, arguments.length);\n      return _goOnline(this._delegate);\n    }\n  }]);\n\n  return Database;\n}();\n\nDatabase.ServerValue = {\n  TIMESTAMP: serverTimestamp(),\n  increment: function increment(delta) {\n    return _increment(delta);\n  }\n};\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Used by console to create a database based on the app,\r\n * passed database URL and a custom auth implementation.\r\n *\r\n * @param app - A valid FirebaseApp-like object\r\n * @param url - A valid Firebase databaseURL\r\n * @param version - custom version e.g. firebase-admin version\r\n * @param customAuthImpl - custom auth implementation\r\n */\n\nfunction initStandalone(_ref2) {\n  var app = _ref2.app,\n      url = _ref2.url,\n      version = _ref2.version,\n      customAuthImpl = _ref2.customAuthImpl,\n      namespace = _ref2.namespace,\n      _ref2$nodeAdmin = _ref2.nodeAdmin,\n      nodeAdmin = _ref2$nodeAdmin === void 0 ? false : _ref2$nodeAdmin;\n\n  _setSDKVersion(version);\n  /**\r\n   * ComponentContainer('database-standalone') is just a placeholder that doesn't perform\r\n   * any actual function.\r\n   */\n\n\n  var authProvider = new Provider('auth-internal', new ComponentContainer('database-standalone'));\n  authProvider.setComponent(new Component('auth-internal', function () {\n    return customAuthImpl;\n  }, \"PRIVATE\"\n  /* ComponentType.PRIVATE */\n  ));\n  return {\n    instance: new Database(_repoManagerDatabaseFromApp(app, authProvider,\n    /* appCheckProvider= */\n    undefined, url, nodeAdmin), app),\n    namespace: namespace\n  };\n}\n\nvar INTERNAL = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  initStandalone: initStandalone\n});\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar ServerValue = Database.ServerValue;\n\nfunction registerDatabase(instance) {\n  // Register the Database Service with the 'firebase' namespace.\n  instance.INTERNAL.registerComponent(new Component('database-compat', function (container, _ref3) {\n    var url = _ref3.instanceIdentifier;\n\n    /* Dependencies */\n    // getImmediate for FirebaseApp will always succeed\n    var app = container.getProvider('app-compat').getImmediate();\n    var databaseExp = container.getProvider('database').getImmediate({\n      identifier: url\n    });\n    return new Database(databaseExp, app);\n  }, \"PUBLIC\"\n  /* ComponentType.PUBLIC */\n  ).setServiceProps( // firebase.database namespace properties\n  {\n    Reference: Reference,\n    Query: Query,\n    Database: Database,\n    DataSnapshot: DataSnapshot,\n    enableLogging: enableLogging,\n    INTERNAL: INTERNAL,\n    ServerValue: ServerValue\n  }).setMultipleInstances(true));\n  instance.registerVersion(name, version);\n}\n\nregisterDatabase(firebase);\nexport { registerDatabase };","map":null,"metadata":{},"sourceType":"module"}